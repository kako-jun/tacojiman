# tacojiman 開発タスク管理

## 📋 現在のタスク状況

### 🏗️ プロジェクト基盤 (Phase 1) ✅ 完了
- [x] ゲーム仕様書作成（CLAUDE.md）
- [x] README作成
- [x] .claudeフォルダ作成
- [x] package.json作成（Zod, js-yaml追加）
- [x] TypeScript設定ファイル作成（tsconfig.json）
- [x] Phaser 3プロジェクト初期化（main.ts作成）
- [x] 基本フォルダ構造作成（src/, assets/, scenes/, entities/, utils/）
- [x] Zod型定義システム構築（src/types/index.ts）
- [x] 設定管理システム（src/utils/config.ts）
- [x] ローカルストレージ管理（src/utils/storage.ts）
- [x] YAML設定ファイル（assets/config/settings.yaml）
- [x] 環境変数テンプレート（.env.example）

### 🎨 アセット制作 (Phase 2)
- [ ] SFC風ドット絵スタイルガイド作成
- [ ] ワイヤーフレーム素材作成
  - [ ] 地形マス（海、川、田んぼ、道路、駅、畑）
  - [ ] タコ型ロボット4種類
  - [ ] プレイヤーの家
  - [ ] UI要素
- [ ] 最終アセット制作
  - [ ] 背景地形WebP
  - [ ] キャラクターWebP
  - [ ] エフェクトWebP

### ⚙️ ゲームシステム実装 (Phase 3)
- [ ] 基本ゲームループ
- [ ] タップ操作システム
- [ ] ズーム・カメラシステム
- [ ] マップ生成・回転システム
- [ ] 敵AI（4種類のタコロボ）
- [ ] プレイヤー攻撃システム
- [ ] ボム忍術システム（3種類）
- [ ] スコアシステム
- [ ] 時刻表示システム

### 🎭 演出・UI (Phase 4)
- [ ] タイトル画面
- [ ] 10段階進捗システム
- [ ] 画面遷移アニメーション
- [ ] p5.js風残像エフェクト
- [ ] 最終ボス戦演出（タココング）
- [ ] エンディングシステム
- [ ] ランキング連携

### 🚀 最適化・デプロイ (Phase 5)
- [ ] パフォーマンス最適化（50匹同時表示）
- [ ] クロスブラウザ対応
- [ ] モバイル最適化
- [ ] itch.io向けビルド
- [ ] Steam向けビルド

## 🎯 現在の優先事項
- [x] プロジェクト基盤完成 ✅
- [ ] シーン基本実装（タイトル、ゲーム、エンディング）
- [ ] タップ操作システムの実装
- [ ] マップ生成システムのプロトタイプ

## 📝 開発メモ

### 重要な仕様
- 画面同時表示タコ上限: 50匹
- ゲーム時間: 固定3分
- タココング戦: 残り10秒、HP42
- 利益の50%能登寄付

### 技術課題
- [ ] Phaser 4での大量オブジェクト描画最適化
- [ ] SFC風ドット絵の効率的な制作ワークフロー
- [ ] 残像エフェクトの軽量実装

### 実装済み機能
- ✅ TypeScript + Zod による型安全な設計
- ✅ YAML設定ファイルの検証システム
- ✅ APIレスポンスの型検証
- ✅ ローカルストレージの型安全アクセス

### 次のステップ
1. `npm install` で依存関係インストール
2. 基本シーンの実装開始
3. タップ操作システムの構築

### 次回確認事項
- [ ] ボム忍術の詳細バランス調整
- [ ] エンディング分岐の具体的なスコア閾値
- [ ] 能登支援の具体的な寄付方法
- [ ] Phaser 4のリリース状況（現在3.70.0使用中）

## 🔧 追加改善項目（Phase 6）

### 型システム強化
- [ ] Union型の導入（BombType, GamePhase等）
- [ ] Branded型で値の混同防止（PixelPosition, TilePosition）
- [ ] Strict null checksの有効化
- [ ] 型ガードの追加実装

### エラーハンドリング強化
- [ ] Result型パターンの導入
- [ ] カスタムエラークラスの実装
- [ ] エラー境界の設定
- [ ] 構造化ログシステムの構築

### パフォーマンス最適化
- [ ] オブジェクトプール実装（エフェクト、敵オブジェクト）
- [ ] メモリリーク対策（イベントリスナー管理）
- [ ] レンダリング最適化（不要描画削減）
- [ ] バンドルサイズの最適化

### テスタビリティ改善
- [ ] 依存性注入システムの導入
- [ ] モックシステムの構築
- [ ] テストファクトリの実装
- [ ] 単体テストの追加

### ログ・デバッグ強化
- [ ] 構造化ログの実装
- [ ] デバッグ情報の充実
- [ ] パフォーマンス計測システム
- [ ] 開発者ツールの改善

### 設定システム改善
- [ ] 環境別設定（development/production/test）
- [ ] 実行時設定変更機能
- [ ] 設定値のバリデーション強化
- [ ] 設定のホットリロード

### ドキュメント・コメント改善
- [ ] 全関数・クラスにJSDoc追加
- [ ] アーキテクチャ図の作成
- [ ] API仕様書の整備
- [ ] コードコメントの充実

---
*最終更新: 2025-01-16*